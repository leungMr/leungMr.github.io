(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{406:function(s,t,a){s.exports=a.p+"assets/img/image-20220111230705574.8f5f6be6.png"},407:function(s,t,a){s.exports=a.p+"assets/img/image-20220111230744633.be0807ab.png"},732:function(s,t,a){"use strict";a.r(t);var n=a(31),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"linux"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#linux"}},[s._v("#")]),s._v(" Linux")]),s._v(" "),n("p",[s._v("center Os7")]),s._v(" "),n("h2",{attrs:{id:"系统"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#系统"}},[s._v("#")]),s._v(" 系统")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("reboot")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全盘查找filename文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" / -name filename\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在etc中模糊查找*lename*文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" /etc -name *lename*\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看文件（夹）列表")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.24-linux-glibc2.12-x86_64.tar.gz\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xzvf mysql-5.7.24-linux-glibc2.12-x86_64.tar.gz\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 移动文件（夹）")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" mysql-5.7.24-linux-glibc2.12-x86_64 /usr/local/mysql\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建文件夹")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /usr/local/mysql/data\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建文件")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建用户组")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" mysql\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建组内用户")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -r -g mysql mysql\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 给用户权限")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R mysql:mysql /usr/local/mysql\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" -R "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("755")]),s._v(" /usr/local/mysql\n")])])]),n("h2",{attrs:{id:"防火墙"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#防火墙"}},[s._v("#")]),s._v(" 防火墙")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装防火墙")]),s._v("\nyum "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" firewalld\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 防火墙状态")]),s._v("\nfirewall-cmd --state\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭")]),s._v("\nsystemctl stop firewalld.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启")]),s._v("\nsystemctl start firewalld.service\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启自启动")]),s._v("\nsystemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" firewalld.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁止自启动")]),s._v("\nsystemctl disable firewalld\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启防火墙")]),s._v("\nfirewall-cmd --reload\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看已经放行的端口")]),s._v("\nfirewall-cmd --list-ports\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询某个端口是否开放")]),s._v("\nfirewall-cmd --query-port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3003")]),s._v("/tcp\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加端口（范围：1000-2000/tcp）")]),s._v("\nfirewall-cmd --zone"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3003")]),s._v("/tcp --permanent\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 移除端口")]),s._v("\nfirewall-cmd --zone"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("public --remove-port"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp --permanent\n\n")])])]),n("blockquote",[n("p",[s._v("--zone #作用域")]),s._v(" "),n("p",[s._v("--add-port=80/tcp #添加端口，格式为：端口/通讯协议")]),s._v(" "),n("p",[s._v("--remove-port=80/tcp #移除端口，格式为：端口/通讯协议")]),s._v(" "),n("p",[s._v("--permanent #永久生效，没有此参数重启后失效")])]),s._v(" "),n("h2",{attrs:{id:"ssh"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ssh"}},[s._v("#")]),s._v(" SSH")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("systemctl status sshd.service\nsystemctl start sshd.service\nsystemctl restart sshd.service\nsystemctl "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" sshd.service\n")])])]),n("h2",{attrs:{id:"宝塔"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#宝塔"}},[s._v("#")]),s._v(" 宝塔")]),s._v(" "),n("p",[s._v("yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh")]),s._v(" "),n("blockquote",[n("p",[s._v("外网面板地址: http://137.184.127.56:8888/51a3aced\n内网面板地址: http://137.184.127.56:8888/51a3aced\nusername: zvh53nts\npassword: 925509b8")])]),s._v(" "),n("p",[n("strong",[s._v("2022-02-01")])]),s._v(" "),n("p",[s._v("外网面板地址: http://143.198.150.216:8888/028833c4\n内网面板地址: http://143.198.150.216:8888/028833c4\nusername: doz80ww5\npassword: 6f48f429")]),s._v(" "),n("h2",{attrs:{id:"自建ssr-centeros-7"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自建ssr-centeros-7"}},[s._v("#")]),s._v(" "),n("strong",[s._v("自建ssr（centerOs 7）")])]),s._v(" "),n("p",[s._v("密码："),n("code",[s._v("高级")])]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装教程 https://tr1.freeair888.club/自建ss服务器教程/ （第一个实践通过）")]),s._v("\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/ssr.sh "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x ssr.sh "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" ssr.sh\n")])])]),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v(" ShadowsocksR账号 配置信息\n\n I P\t "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" \n SSR   链接 "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" ssr://MTY0LjkyLjEwNS4xMzE6ODA4ODphdXRoX3NoYTFfdjQ6YWVzLTEyOC1jdHI6cGxhaW46TVRRMU1UTXc\n")])])]),n("blockquote",[n("p",[s._v("A：如果ip不能ping通，xshell不能直接连接vps服务器，说明ip被墙了，需要换ip。vultr开通和删除服务器非常方便，新服务器即新ip，为了保证开通的新服务器ip和旧ip不一样，先开新服务器出现ip后再删旧服务器。其它大多数vps服务商换ip都要额为收费。")]),s._v(" "),n("p",[s._v("B: 如果ip能ping，xshell能直接连接vps服务器，说明ip没有被墙，多半是端口被封了，优先换端口。测试端口是否正常网址")]),s._v(" "),n("p",[s._v("http://port.ping.pe/143.198.53.148:6080，将ip换成你自己的vps ip，端口是ssr账号端口，中间的冒号为英文状态下的冒号。测试结果如果全是绿色，那么代表端口正常；如果国外是绿色，国内是红色，代表端口被封；如果全是红色，代表服务没有正常启动或者没有正常搭建成功。")])]),s._v(" "),n("h2",{attrs:{id:"安装mysql57"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装mysql57"}},[s._v("#")]),s._v(" 安装Mysql57")]),s._v(" "),n("p",[s._v("端口：3306\t用户：root\t密码：123456")]),s._v(" "),n("p",[s._v("主要参考链接：")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://blog.csdn.net/qq_37598011/article/details/93489404",target:"_blank",rel:"noopener noreferrer"}},[s._v("(25条消息) Linux安装MySQL5.7_吃四碗饭的嘤嘤怪的博客-CSDN博客_linux安装mysql"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"https://www.cnblogs.com/z0909y/p/10026453.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("linux 上设置mysql开机自启 - 张左左 - 博客园 (cnblogs.com)"),n("OutboundLink")],1)])]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止mysql")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysqld stop \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysqld restart\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看线程数")]),s._v("\nmysql"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" show status like "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Threads%'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# windows 8.0 修改密码")]),s._v("\nalter user "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),s._v(" IDENTIFIED BY "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Password_123'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),n("h2",{attrs:{id:"postgres"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#postgres"}},[s._v("#")]),s._v(" Postgres")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("数据库")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看数据库否启动")]),s._v("\nsystemctl status postgresql-13\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动数据库")]),s._v("\nsystemctl start postgresql.service\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启数据库")]),s._v("\nsystemctl restart postgresql-13\n")])])])]),s._v(" "),n("li",[n("p",[s._v("常用SQL")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看数据库版本")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" VERSION"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看连接数")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" count"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" from pg_stat_activity"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看版本")]),s._v("\nCREATE EXTENSION postgis"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" postgis_version"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nSELECT AddGeometryColumn "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'模式名'")]),s._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'表名'")]),s._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'geom'")]),s._v(",4326,"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'POLYGON'")]),s._v(",2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看当前库所安装的插件名称")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" name from pg_available_extensions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看插件信息")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" * from pg_available_extensions WHERE name like "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'postgis'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加几何字段 LINESTRING  POLYGON  POINT （32）")]),s._v("\nSELECT AddGeometryColumn "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'demo'")]),s._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'geo_polygon'")]),s._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'geom'")]),s._v(",4326,"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'POLYGON'")]),s._v(",2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除一个模式")]),s._v("\ndrop schema demo CASCADE\n\n")])])])])]),s._v(" "),n("p",[s._v("端口：5432")]),s._v(" "),n("p",[s._v("用户：postgres")]),s._v(" "),n("p",[s._v("密码：LZX#14513x")]),s._v(" "),n("ul",[n("li",[s._v("linux 安装参考")])]),s._v(" "),n("blockquote",[n("p",[s._v("主要参考："),n("a",{attrs:{href:"https://www.cnblogs.com/lqqgis/p/15075208.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Linux安装PostgreSQL和PostGIS - lqqgis - 博客园 (cnblogs.com)"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("其他：")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://www.postgresql.org/download/linux/redhat/",target:"_blank",rel:"noopener noreferrer"}},[s._v("PostgreSQL： Linux downloads （Red Hat 系列）"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://www.cnblogs.com/ningy1009/p/14467751.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Linux 安装postgresql - 13 - 蓝色的天_90 - 博客园 (cnblogs.com)"),n("OutboundLink")],1)])]),s._v(" "),n("ul",[n("li",[s._v("vim使用")])]),s._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"http://www.360doc.com/content/14/1031/19/6365088_421513569.shtml",target:"_blank",rel:"noopener noreferrer"}},[s._v("vi(vim)简单使用教程（文件的打开保存和修改） (360doc.com)"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://blog.csdn.net/softimite_zifeng/article/details/53303856",target:"_blank",rel:"noopener noreferrer"}},[s._v("(14条消息) 如何使用vim命令修改或新建文件_子丰的博客-CSDN博客_vim修改文件"),n("OutboundLink")],1)])]),s._v(" "),n("ul",[n("li",[s._v("配置文件")])]),s._v(" "),n("blockquote",[n("p",[s._v("vim /var/lib/pgsql/13/data/postgresql.conf")]),s._v(" "),n("p",[n("img",{attrs:{src:a(406),alt:"image-20220111230705574"}})])]),s._v(" "),n("blockquote",[n("p",[s._v("vim /var/lib/pgsql/13/data/pg_hba.conf")]),s._v(" "),n("p",[n("img",{attrs:{src:a(407),alt:"image-20220111230744633"}})])]),s._v(" "),n("h3",{attrs:{id:"记录一个问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#记录一个问题"}},[s._v("#")]),s._v(" 记录一个问题")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("在进行数据库迁移时候：")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("使用命令行建立数据库smart_town")]),s._v(" "),n("blockquote",[n("p",[n("code",[s._v("su postgres")])]),s._v(" "),n("p",[n("code",[s._v("bash-4.2$ createdb smart_town -O postgres")])]),s._v(" "),n("p",[s._v("假如上述不成功（无法切换至postgres用户），执行sudo -u postgres createdb smart_town -O postgres。。但是无法添加扩展")])])]),s._v(" "),n("li",[n("p",[s._v("加载postgis插件")])]),s._v(" "),n("li",[n("p",[s._v("创建模式demo")])]),s._v(" "),n("li",[n("p",[s._v("从已有数据库-模式demo导出结构和数据sql")])]),s._v(" "),n("li",[n("p",[s._v("在新数据库smart_town中运行sql")])])])])]),s._v(" "),n("h3",{attrs:{id:"开机自启动"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开机自启动"}},[s._v("#")]),s._v(" 开机自启动")]),s._v(" "),n("h3",{attrs:{id:"定时备份数据库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#定时备份数据库"}},[s._v("#")]),s._v(" 定时备份数据库")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://www.cnblogs.com/telwanggs/p/15044245.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Linux 上 定时备份postgresql 数据库的方法 - 疯子110 - 博客园 (cnblogs.com)"),n("OutboundLink")],1)]),s._v(" "),n("ol",[n("li",[s._v("定时备份（smart_town，pgsql-13）")])]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"开始执行 PostgreSql 数据库smart_town的备份！"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"backup ing -------------------"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("nowtime")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%F+%T"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PGPASSWORD")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"时间："')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$nowtime")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("timeout")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v("\n/usr/pgsql-13/bin/pg_dump --file "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/BackupFile/db-bak/2/bak-file/all/pgsql-all-"')]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$nowtime")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('".backup"')]),s._v(" --host "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"10.10.10.100"')]),s._v(" --port "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5432"')]),s._v(" --username "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"postgres"')]),s._v(" --dbname "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"smart_town"')]),s._v(" --verbose --role "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"postgres"')]),s._v(" --format"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("c --blobs --encoding "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"UTF8"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"数据库 smart_town 备份结束！"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),n("ol",{attrs:{start:"2"}},[n("li",[s._v("定时删除")])]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"删除 8 天前的 数据库备份文件！"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" /BackupFile/db-bak/2/bak-file/all/ -name "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pgsql-all*"')]),s._v(" -mtime +7 -exec "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("timeout")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('" 8 天前的数据库备份文件删除完毕！"')]),s._v("\n")])])]),n("ol",{attrs:{start:"3"}},[n("li",[s._v("恢复")])]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("/usr/pgsql-13/bin/pg_restore --host "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1"')]),s._v(" --username "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"postgres"')]),s._v(" -c --dbname "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"testBkup"')]),s._v(" /gisleung/shell/testBkup.backup\n")])])]),n("h2",{attrs:{id:"安装ffmpeg-mp4转m3u8"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装ffmpeg-mp4转m3u8"}},[s._v("#")]),s._v(" 安装ffmpeg MP4转m3u8")]),s._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://blog.csdn.net/z13615480737/article/details/106949404")]),s._v("\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" epel-release\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" --import http://li.nux.ro/download/nux/RPM-GPG-KEY-nux.ro\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -Uvh http://li.nux.ro/download/nux/dextop/el7/x86_64/nux-dextop-release-0-1.el7.nux.noarch.rpm\nyum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ffmpeg ffmpeg-devel\nffmpeg -version\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开始切片")]),s._v("\nffmpeg -i cesium.mp4 -c:v libx264 -hls_time "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" -hls_list_size "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" -c:a aac -strict -2 -f hls cesium/cesium.m3u8\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一些参数的说明")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://blog.91python.com/centos/2016/09/18/ffmpeg-m3u8-logo.html")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# https://blog.csdn.net/qq_36336003/article/details/90205336")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);